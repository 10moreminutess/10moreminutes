<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 More Minutes - App</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://unpkg.com/tailwindcss-cdn@3.4.0/tailwindcss.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .max-w-sm { max-width: 24rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Lucide React icons
        const Clock = lucide.Clock;
        const Heart = lucide.Heart;
        const MessageCircle = lucide.MessageCircle;
        const Shield = lucide.Shield;
        const Users = lucide.Users;
        const Phone = lucide.Phone;
        const Star = lucide.Star;
        const AlertTriangle = lucide.AlertTriangle;
        const Gift = lucide.Gift;
        const Play = lucide.Play;
        const CreditCard = lucide.CreditCard;
        const Coffee = lucide.Coffee;
        const Mic = lucide.Mic;
        const MicOff = lucide.MicOff;

        // Socket.io simulation
        const simulateSocket = () => {
            const events = {};
            return {
                emit: (event, data) => {
                    console.log('Socket emit:', event, data);
                    if (event === 'find-match') {
                        setTimeout(() => {
                            if (events['matched']) events['matched']({ roomId: `room_${Date.now()}` });
                        }, 3000);
                    }
                },
                on: (event, callback) => {
                    events[event] = callback;
                },
                off: (event) => {
                    delete events[event];
                }
            };
        };

        const TenMoreMinutesApp = () => {
            const [currentScreen, setCurrentScreen] = useState('home');
            const [userType, setUserType] = useState(null);
            const [isMatching, setIsMatching] = useState(false);
            const [isConnected, setIsConnected] = useState(false);
            const [timeRemaining, setTimeRemaining] = useState(600);
            const [isTrainingComplete, setIsTrainingComplete] = useState(false);
            const [messages, setMessages] = useState([]);
            const [currentMessage, setCurrentMessage] = useState('');
            const [showExtensionRequest, setShowExtensionRequest] = useState(false);
            const [userWantsExtension, setUserWantsExtension] = useState(null);
            const [otherUserWantsExtension, setOtherUserWantsExtension] = useState(null);
            const [extensionCount, setExtensionCount] = useState(0);
            const [showFeedback, setShowFeedback] = useState(false);
            const [rating, setRating] = useState(0);
            const [isWatchingAd, setIsWatchingAd] = useState(false);
            const [socket, setSocket] = useState(null);
            const [roomId, setRoomId] = useState(null);

            // Initialize socket connection
            useEffect(() => {
                const socketInstance = simulateSocket();
                setSocket(socketInstance);

                socketInstance.on('matched', ({ roomId }) => {
                    console.log('Matched with room:', roomId);
                    setRoomId(roomId);
                    setIsMatching(false);
                    setIsConnected(true);
                    setCurrentScreen('chat');
                    setMessages([
                        { type: 'system', text: '🎙️ Connected! You can now chat with each other.' }
                    ]);
                });

                socketInstance.on('message', (message) => {
                    setMessages(prev => [...prev, { type: 'other', text: message }]);
                });

                return () => {
                    if (socketInstance) {
                        socketInstance.off('matched');
                        socketInstance.off('message');
                    }
                };
            }, []);

            // Timer effect
            useEffect(() => {
                if (isConnected && timeRemaining > 0) {
                    const timer = setInterval(() => {
                        setTimeRemaining(prev => {
                            if (prev === 31 && !showExtensionRequest) {
                                setShowExtensionRequest(true);
                            }
                            return prev - 1;
                        });
                    }, 1000);
                    return () => clearInterval(timer);
                }
            }, [isConnected, timeRemaining, showExtensionRequest]);

            // Handle extension logic
            useEffect(() => {
                if (userWantsExtension !== null && otherUserWantsExtension !== null) {
                    if (userWantsExtension && otherUserWantsExtension) {
                        setTimeRemaining(600);
                        setExtensionCount(prev => prev + 1);
                        setMessages(prev => [...prev, { 
                            type: 'system', 
                            text: `🎉 You both agreed to continue! Another 10 minutes added. (Extension ${extensionCount + 1})` 
                        }]);
                    } else {
                        setMessages(prev => [...prev, { 
                            type: 'system', 
                            text: 'One person chose not to extend. The session will end when time runs out.' 
                        }]);
                    }
                    setShowExtensionRequest(false);
                    setUserWantsExtension(null);
                    setOtherUserWantsExtension(null);
                }
            }, [userWantsExtension, otherUserWantsExtension, extensionCount]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            // Logo component
            const LogoComponent = () => (
                React.createElement('div', { className: "relative w-20 h-20 mx-auto mb-4" },
                    React.createElement('div', { className: "w-20 h-20 rounded-full border-4 border-blue-400 relative" },
                        React.createElement('div', { className: "absolute top-2 left-1/2 w-0.5 h-6 bg-blue-400 origin-bottom transform -translate-x-1/2 rotate-12" }),
                        React.createElement('div', { className: "absolute top-6 left-1/2 w-0.5 h-4 bg-blue-400 origin-bottom transform -translate-x-1/2 -rotate-12" }),
                        React.createElement('div', { className: "absolute -top-1 left-1/2 transform -translate-x-1/2 text-blue-400 font-bold text-lg" }, "10"),
                        React.createElement('div', { className: "absolute top-4 -left-2 text-blue-400 font-bold text-sm transform -rotate-45" }, "More"),
                        React.createElement('div', { className: "absolute bottom-2 -right-3 text-blue-400 font-bold text-sm transform rotate-45" }, "Minutes")
                    )
                )
            );

            const handleMatching = () => {
                setIsMatching(true);
                if (socket) {
                    socket.emit('find-match', { userType, preferences: {} });
                }
            };

            const sendMessage = () => {
                if (currentMessage.trim()) {
                    const message = { type: 'user', text: currentMessage };
                    setMessages(prev => [...prev, message]);
                    
                    if (socket && roomId) {
                        socket.emit('message', currentMessage, roomId);
                    }
                    
                    setCurrentMessage('');
                }
            };

            const watchAd = () => {
                setIsWatchingAd(true);
                setTimeout(() => {
                    setIsWatchingAd(false);
                    alert('Thank you for watching! This helps keep our service free.');
                }, 3000);
            };

            const makeDonation = (amount) => {
                alert(`Thank you for your ${amount} donation! This helps us support more people.`);
            };

            const HomeScreen = () => (
                React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 p-6 flex flex-col" },
                    React.createElement('div', { className: "text-center mb-8 mt-12" },
                        React.createElement(LogoComponent),
                        React.createElement('h1', { className: "text-3xl font-bold text-blue-400 mb-2" }, "10 More Minutes"),
                        React.createElement('p', { className: "text-slate-300 text-lg" }, "Get through the next 10 minutes together")
                    ),
                    React.createElement('div', { className: "flex-1 flex flex-col justify-center space-y-6" },
                        React.createElement('button', {
                            onClick: () => {
                                setUserType('seeker');
                                setCurrentScreen('matching');
                            },
                            className: "bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 border border-blue-500"
                        },
                            React.createElement(MessageCircle, { className: "w-8 h-8 mx-auto mb-3" }),
                            React.createElement('h3', { className: "text-xl font-semibold mb-2" }, "I need support"),
                            React.createElement('p', { className: "text-blue-100" }, "Connect with someone who can listen")
                        ),
                        React.createElement('button', {
                            onClick: () => {
                                setUserType('helper');
                                if (!isTrainingComplete) {
                                    setCurrentScreen('training');
                                } else {
                                    setCurrentScreen('matching');
                                }
                            },
                            className: "bg-gradient-to-r from-teal-600 to-teal-700 text-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 border border-teal-500"
                        },
                            React.createElement(Heart, { className: "w-8 h-8 mx-auto mb-3" }),
                            React.createElement('h3', { className: "text-xl font-semibold mb-2" }, "I can give support"),
                            React.createElement('p', { className: "text-teal-100" }, "Help someone through their moment")
                        )
                    ),
                    React.createElement('div', { className: "flex justify-around mt-8 text-sm text-slate-400" },
                        React.createElement('div', { className: "flex items-center" },
                            React.createElement(Shield, { className: "w-4 h-4 mr-1" }),
                            React.createElement('span', null, "Anonymous")
                        ),
                        React.createElement('button', { className: "bg-red-500 text-white p-2 rounded-full hover:bg-red-600" },
                            React.createElement(AlertTriangle, { className: "w-4 h-4" })
                        ),
                        React.createElement('div', { className: "flex items-center" },
                            React.createElement(Clock, { className: "w-4 h-4 mr-1" }),
                            React.createElement('span', null, "10 minutes")
                        ),
                        React.createElement('div', { className: "flex items-center" },
                            React.createElement(Users, { className: "w-4 h-4 mr-1" }),
                            React.createElement('span', null, "Safe space")
                        )
                    )
                )
            );

            const TrainingScreen = () => (
                React.createElement('div', { className: "min-h-screen bg-white p-6" },
                    React.createElement('div', { className: "max-w-md mx-auto" },
                        React.createElement('div', { className: "text-center mb-8" },
                            React.createElement(Shield, { className: "w-16 h-16 text-green-500 mx-auto mb-4" }),
                            React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-2" }, "Helper Training"),
                            React.createElement('p', { className: "text-gray-600" }, "Learn how to provide effective support")
                        ),
                        React.createElement('div', { className: "space-y-6" },
                            React.createElement('div', { className: "bg-green-50 p-4 rounded-lg" },
                                React.createElement('h3', { className: "font-semibold text-green-800 mb-2" }, "Key Principles"),
                                React.createElement('ul', { className: "text-green-700 space-y-1 text-sm" },
                                    React.createElement('li', null, "• Listen without judgment"),
                                    React.createElement('li', null, "• Ask open-ended questions"),
                                    React.createElement('li', null, "• Validate their feelings"),
                                    React.createElement('li', null, "• Don't give advice unless asked"),
                                    React.createElement('li', null, "• Maintain boundaries")
                                )
                            ),
                            React.createElement('div', { className: "bg-yellow-50 p-4 rounded-lg" },
                                React.createElement('h3', { className: "font-semibold text-yellow-800 mb-2" }, "Red Flags"),
                                React.createElement('ul', { className: "text-yellow-700 space-y-1 text-sm" },
                                    React.createElement('li', null, "• Mentions of self-harm or suicide"),
                                    React.createElement('li', null, "• Immediate danger"),
                                    React.createElement('li', null, "• Inappropriate content"),
                                    React.createElement('li', null, "• Requests for personal information")
                                )
                            ),
                            React.createElement('div', { className: "bg-red-50 p-4 rounded-lg" },
                                React.createElement('div', { className: "flex items-center mb-2" },
                                    React.createElement(AlertTriangle, { className: "w-5 h-5 text-red-600 mr-2" }),
                                    React.createElement('h3', { className: "font-semibold text-red-800" }, "Emergency Escalation")
                                ),
                                React.createElement('p', { className: "text-red-700 text-sm" },
                                    "If someone mentions harm to themselves or others, immediately use the emergency button to connect them with professional help."
                                )
                            )
                        ),
                        React.createElement('button', {
                            onClick: () => {
                                setIsTrainingComplete(true);
                                setCurrentScreen('matching');
                            },
                            className: "w-full bg-green-500 text-white py-3 rounded-lg font-semibold mt-8 hover:bg-green-600 transition-colors"
                        }, "Complete Training & Continue")
                    )
                )
            );

            const MatchingScreen = () => (
                React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-6 flex flex-col justify-center items-center" },
                    React.createElement('div', { className: "text-center" },
                        isMatching ? 
                            React.createElement(React.Fragment, null,
                                React.createElement('div', { className: "animate-spin rounded-full h-16 w-16 border-b-2 border-purple-500 mx-auto mb-6" }),
                                React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-2" }, "Finding someone for you..."),
                                React.createElement('p', { className: "text-gray-600" }, "This usually takes just a few seconds")
                            ) :
                            React.createElement(React.Fragment, null,
                                React.createElement(Users, { className: "w-16 h-16 text-purple-500 mx-auto mb-6" }),
                                React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-4" },
                                    userType === 'seeker' ? 'Ready to connect?' : 'Ready to help?'
                                ),
                                React.createElement('p', { className: "text-gray-600 mb-8" },
                                    userType === 'seeker' 
                                        ? 'You\'ll be matched with someone who wants to listen'
                                        : 'You\'ll be matched with someone who needs support'
                                ),
                                React.createElement('button', {
                                    onClick: handleMatching,
                                    className: "bg-purple-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-600 transition-colors"
                                }, "Find My Match")
                            )
                    ),
                    React.createElement('button', {
                        onClick: () => setCurrentScreen('home'),
                        className: "absolute top-6 left-6 text-gray-500 hover:text-gray-700"
                    }, "← Back")
                )
            );

            const ChatScreen = () => (
                React.createElement('div', { className: "min-h-screen bg-gray-50 flex flex-col" },
                    // Header
                    React.createElement('div', { className: "bg-white p-4 shadow-sm flex items-center justify-between" },
                        React.createElement('div', { className: "flex items-center" },
                            React.createElement('div', { className: "w-3 h-3 bg-green-400 rounded-full mr-3" }),
                            React.createElement('span', { className: "font-semibold text-gray-800" }, "Connected")
                        ),
                        React.createElement('div', { className: "flex space-x-4 mb-4" },
                            React.createElement('div', { className: "flex items-center bg-blue-100 px-3 py-1 rounded-full" },
                                React.createElement(Clock, { className: "w-4 h-4 text-blue-600 mr-1" }),
                                React.createElement('span', { 
                                    className: `font-mono text-sm ${timeRemaining <= 60 ? 'text-red-600 font-bold' : 'text-blue-800'}`
                                }, formatTime(timeRemaining))
                            ),
                            extensionCount > 0 && React.createElement('div', { className: "flex items-center bg-green-100 px-3 py-1 rounded-full" },
                                React.createElement('span', { className: "text-green-800 text-sm font-semibold" }, `+${extensionCount}`)
                            )
                        )
                    ),
                    // Messages
                    React.createElement('div', { className: "flex-1 overflow-y-auto p-4 space-y-4" },
                        messages.map((msg, idx) =>
                            React.createElement('div', { 
                                key: idx,
                                className: msg.type === 'system' ? 'text-center' :
                                          msg.type === 'user' ? 'flex justify-end' : 'flex justify-start'
                            },
                                msg.type === 'system' ?
                                    React.createElement('div', { className: "bg-yellow-100 text-yellow-800 px-3 py-2 rounded-lg text-sm" }, msg.text) :
                                    React.createElement('div', { 
                                        className: `max-w-xs px-4 py-2 rounded-2xl ${
                                            msg.type === 'user' 
                                                ? 'bg-blue-500 text-white' 
                                                : 'bg-white text-gray-800 shadow-sm'
                                        }`
                                    }, msg.text)
                            )
                        )
                    ),
                    // Input
                    React.createElement('div', { className: "bg-white p-4 border-t" },
                        React.createElement('div', { className: "flex space-x-2" },
                            React.createElement('input', {
                                type: "text",
                                value: currentMessage,
                                onChange: (e) => setCurrentMessage(e.target.value),
                                onKeyPress: (e) => e.key === 'Enter' && sendMessage(),
                                placeholder: "Type your message...",
                                className: "flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:border-blue-500"
                            }),
                            React.createElement('button', {
                                onClick: sendMessage,
                                className: "bg-blue-500 text-white p-2 rounded-full hover:bg-blue-600 transition-colors"
                            },
                                React.createElement(MessageCircle, { className: "w-5 h-5" })
                            )
                        )
                    )
                    // Extension and feedback modals would go here but are quite complex for this format
                )
            );

            const renderScreen = () => {
                switch(currentScreen) {
                    case 'home': return React.createElement(HomeScreen);
                    case 'training': return React.createElement(TrainingScreen);
                    case 'matching': return React.createElement(MatchingScreen);
                    case 'chat': return React.createElement(ChatScreen);
                    default: return React.createElement(HomeScreen);
                }
            };

            return React.createElement('div', { className: "max-w-sm mx-auto bg-white min-h-screen shadow-xl" },
                renderScreen()
            );
        };

        ReactDOM.render(React.createElement(TenMoreMinutesApp), document.getElementById('root'));
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 More Minutes - App</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px;
            width: 90%;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2.5em;
        }
        p {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        .app-area {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            border: 2px dashed #dee2e6;
        }
        .status {
            color: #28a745;
            font-weight: bold;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 10 More Minutes</h1>
        <p>Welcome to the beta! Your productivity app is ready.</p>
        
        <div class="app-area">
            <div class="status">✅ App Successfully Loaded!</div>
            <p>This is your 10 More Minutes app. You can now build your features here.</p>
        </div>
    </div>
</body>
</html>
